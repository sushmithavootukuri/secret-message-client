{"version":3,"sources":["api/index.js","SentMessages.js","ViewSecretMessage.js","Home.js","App.js","index.js"],"names":["api","axios","create","baseURL","ViewMessages","_useState","useState","JSON","parse","localStorage","getItem","_useState2","Object","slicedToArray","messages","setMessages","react_default","a","createElement","className","length","map","messageObj","index","SentMessages_ViewMessage","key","ViewMessage","_ref","_useState3","_useState4","passwordVisibility","setPasswordVisibility","_useState5","_useState6","password","setPassword","deleteMessage","_ref2","asyncToGenerator","regenerator_default","mark","_callee","messageData","wrap","_context","prev","next","delete","data","then","res","alert","temp","filter","msg","randomKey","secretKey","setItem","stringify","catch","error","stop","_x","apply","this","arguments","message","substring","type","name","placeholder","onChange","e","target","value","onClick","ViewSecretMessage","id","setMessage","useEffect","_getMessage","response","get","concat","sent","result","getMessage","Fragment","MessageSchema","yup","shape","required","email","Home","HomePage","toggle","setToggle","toggleSentMessages","setToggleSentMessages","MessageForm","_useForm","useForm","validationSchema","register","handleSubmit","errors","onSubmit","_ref3","uuidv4","targetUrl","targetMail","post","msgStore","push","ref","size","rows","App","react_router_dom","SecretMessageService","query","URLSearchParams","useLocation","search","rootElement","document","getElementById","ReactDOM","render","react"],"mappings":"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","file":"static/js/main.391b2e83.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nexport const api = axios.create({\r\n    // baseURL: \"http://localhost:3200\"\r\n    baseURL: \"https://secret-messeger-api.herokuapp.com\"\r\n\r\n});\r\n\r\n","import React, { useState } from \"react\";\r\nimport { api } from \"./api/index\";\r\n\r\nexport default function ViewMessages() {\r\n  const [messages, setMessages] = useState(JSON.parse(localStorage.getItem(\"messages\")));\r\n\r\n  return (\r\n\r\n    <div className=\"col-md-8\">\r\n      <div className=\"row col-10 text-center text-danger  mx-auto\">\r\n        {!messages || messages.length === 0 ? <h1 >No secret messages sent!!</h1> :\r\n\r\n          messages.length > 0 && messages.map((messageObj, index) => (\r\n            <ViewMessage messageObj={messageObj} key={index} setMessages={setMessages} />\r\n          ))\r\n        }\r\n      </div>\r\n    </div >\r\n\r\n  );\r\n};\r\n\r\nconst ViewMessage = ({ messageObj, setMessages }) => {\r\n  const [passwordVisibility, setPasswordVisibility] = useState(false);\r\n  const [password, setPassword] = useState(\"\");\r\n  let deleteMessage = async (messageData) => {\r\n    api.delete(\"/delete-message\", { data: messageData })\r\n      .then((res) => {\r\n        alert(\"Message deleted succesfully!\");\r\n\r\n\r\n        let temp = JSON.parse(localStorage.getItem(\"messages\") || \"[]\");\r\n        temp = temp.filter((msg) => {\r\n          return msg.randomKey !== messageData.secretKey\r\n        })\r\n\r\n        setMessages(temp)\r\n        localStorage.setItem(\"messages\", JSON.stringify(temp));\r\n      })\r\n      .catch((error) => alert(error));\r\n\r\n  }\r\n  return (\r\n\r\n    <div className=\"col-md-5 mt-3 text-center\">\r\n      <div className=\"card h-100\">\r\n        <div className=\"card-body\">\r\n          <p className=\"card-text text-overflow \">{messageObj.message.length > 35 ? messageObj.message.substring(0, 35) + \"...\" : messageObj.message}  </p>\r\n          {passwordVisibility && <input type=\"password\" name=\"password\" placeholder=\"Enter Password\" onChange={(e) => {\r\n            setPassword(e.target.value)\r\n          }}></input>}\r\n          {!passwordVisibility && <button className=\"btn btn-danger\"\r\n            onClick={() => {\r\n              setPasswordVisibility(true)\r\n            }}\r\n          >Delete</button>}\r\n\r\n          {passwordVisibility && <button className=\"btn btn-danger\"\r\n            onClick={() => {\r\n              deleteMessage({\r\n                password: password,\r\n                secretKey: messageObj.randomKey\r\n              }).then(() => {\r\n                setPasswordVisibility(false)\r\n                setPassword(\"\")\r\n              })\r\n\r\n            }}\r\n          >Delete</button>}\r\n\r\n        </div>\r\n      </div >\r\n    </div >\r\n\r\n\r\n  );\r\n};\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { api } from \"./api/index\";\r\n\r\nexport default function ViewSecretMessage({ id }) {\r\n    const [message, setMessage] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        async function getMessage() {\r\n            const response = await api.get(`/message-by-id/${id}`);\r\n\r\n            setMessage(response.data.result[0].message);\r\n        }\r\n        getMessage();\r\n    }, []);\r\n\r\n    return (\r\n\r\n        <div className=\"col-md-8 mt-3 mx-auto mt-5\">\r\n            <div className=\"card h-100\">\r\n                <div className=\"card-body text-center\">\r\n                    {!message ? (\r\n                        <h5 className=\"card-title\">Oops! Message is either deleted by the Sender or You have navigated to a different link</h5>\r\n                    ) : (\r\n                        <>   <h5 className=\"card-title\">Your Secret Message is </h5>\r\n                            <p className=\"card-text \">{message}  </p> </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div >\r\n\r\n\r\n    );\r\n};","import React, { useState } from \"react\";\r\nimport * as yup from \"yup\";\r\nimport useForm from \"react-hook-form\";\r\nimport { api } from \"./api/index\";\r\nimport SentMessages from \"./SentMessages\"\r\nimport ViewSecretMessage from \"./ViewSecretMessage\"\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst MessageSchema = yup.object().shape({\r\n  message: yup\r\n    .string()\r\n    .required(\"Secret Message is required\"),\r\n  email: yup.string().email(\"Invalid email\").required(\"Email is required\"),\r\n  password: yup.string().required(\"Password is required\")\r\n\r\n});\r\n\r\nexport default function Home({ id }) {\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"navbar-header site-name text-danger text-center pt-2 font-weight-bold\">Secret Messenger</h2>\r\n      <h6 className=\"navbar-header site-name text-danger text-center pt-4 font-weight-bold\">Start sending secret messages Anonymously!</h6>\r\n      {id && <ViewSecretMessage id={id} />}\r\n      {!id && <HomePage />}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function HomePage() {\r\n  const [toggle, setToggle] = useState(false);\r\n  const [toggleSentMessages, setToggleSentMessages] = useState(false);\r\n  return (\r\n    <div className=\"text-center\">\r\n\r\n      <button\r\n        className=\"btn btn-danger  mx-5 my-5 p-2\"\r\n        onClick={() => {\r\n          setToggle(!toggle);\r\n          setToggleSentMessages(false)\r\n        }}\r\n      >\r\n        Send a secret Message\r\n      </button>\r\n\r\n      <button\r\n        className=\"btn btn-danger  mx-5 my-5 p-2\"\r\n        onClick={() => {\r\n          setToggleSentMessages(!toggleSentMessages);\r\n          setToggle(false);\r\n        }}\r\n      >\r\n        View Sent Messages\r\n      </button>\r\n\r\n      {toggleSentMessages && <SentMessages />}\r\n      {toggle && <MessageForm setToggle={setToggle} setToggleSentMessages={setToggleSentMessages} />}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function MessageForm({ setToggle, setToggleSentMessages }) {\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    validationSchema: MessageSchema\r\n  });\r\n\r\n  const onSubmit = async (data) => {\r\n\r\n    const messageData = {\r\n      randomKey: uuidv4(),\r\n      password: data.password,\r\n      message: data.message,\r\n      targetUrl: \"https://secret-messenger.netlify.app\",\r\n      targetMail: data.email\r\n    }\r\n\r\n    api\r\n      .post(`/create-message`, messageData)\r\n      .then((res) => {\r\n        alert(\"Message sent succesfully!\");\r\n\r\n        let msgStore = JSON.parse(localStorage.getItem(\"messages\") || \"[]\");\r\n\r\n        msgStore.push({\r\n          randomKey: messageData.randomKey,\r\n          message: messageData.message\r\n        })\r\n        localStorage.setItem(\"messages\", JSON.stringify(msgStore));\r\n        setToggle(false);\r\n        setToggleSentMessages(true);\r\n      })\r\n      .catch((error) => {\r\n        alert(error.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n        <div className=\"col-md-4 mt-3 mx-auto\">\r\n          <div className=\"card h-100 \">\r\n            <div className=\"card-body mx-auto\">\r\n\r\n\r\n              <input\r\n                name=\"email\"\r\n                placeholder=\"Enter Receiver's Mail\"\r\n                type=\"email\"\r\n                ref={register}\r\n                size=\"35\"\r\n              />\r\n              {errors.email && <p className=\"error\">{errors.email}</p>}\r\n\r\n\r\n              <textarea name=\"message\" placeholder=\"Secret Message\" rows=\"4\" ref={register} />\r\n              {errors.message && <p className=\"error\">{errors.message}</p>}\r\n\r\n              <input\r\n                name=\"password\"\r\n                placeholder=\"Enter Password\"\r\n                type=\"password\"\r\n                ref={register}\r\n                size=\"35\"\r\n              />\r\n              {errors.password && <p className=\"error\">{errors.password}</p>}\r\n\r\n              <input className=\"btn btn-danger\" type=\"submit\" />\r\n            </div>\r\n          </div>\r\n        </div >\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport Home from \"./Home\"\nimport { BrowserRouter as Router, useLocation } from \"react-router-dom\";\n\n\nexport default function App() {\n  return (\n    <Router>\n      <SecretMessageService />\n    </Router>\n  );\n}\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction SecretMessageService() {\n  let query = useQuery();\n  return (\n    <div className=\"bg_image\">\n      <Home id={query.get(\"rs\")} />\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}